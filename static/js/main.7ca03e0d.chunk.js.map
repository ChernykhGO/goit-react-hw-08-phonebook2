{"version":3,"sources":["components/redux/auth/auth-operations.js","components/redux/auth/auth-selectors.js","components/Navigation.js","components/UserMenu/UserMenu.js","components/AuthNav.js","components/AppBar.js","components/views/HomeViews.js","components/views/LoginView.js","components/views/RegisterView.js","components/redux/actions.js","components/redux/selectors.js","components/ContactList/ContactList.js","components/redux/operations.js","components/ContactForm/ContactForm.js","components/Filter/Filter.js","components/views/ContactsView.js","components/PrivateRoute.js","components/PublicRoute.js","App.js","components/redux/reducer.js","components/redux/auth/auth-slice.js","components/redux/store.js","index.js","components/ContactList/ContactList.module.css"],"names":["axios","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","a","rejectWithValue","post","data","logIn","logOut","fetchCurrentUser","_","thunkAPI","state","getState","auth","persistedToken","set","get","console","log","operations","authSelectors","getIsLoggedIn","isLoggedIn","getUsername","user","name","getUserEmail","email","getisFetchingUser","isFetchingUser","styles","link","display","textDecoration","fontWeight","color","marginRight","activeLink","Navigation","useSelector","to","exact","style","activeStyle","container","alignItems","avatar","UserMenu","dispatch","useDispatch","type","onClick","authOperations","marginLeft","AuthNav","href","underline","AppBarComponent","AppBar","Toolbar","Typography","variant","flexGrow","component","marginTop","title","textAlign","HomeView","LoginView","useState","setEmail","password","setPassword","handleChange","target","value","DialogContent","onSubmit","e","preventDefault","autoComplete","TextField","autoFocus","margin","onChange","Button","RegisterView","setName","id","fetchContactRequest","createAction","fetchContactSuccess","fetchContactError","addContactRequest","addContactSuccess","addContactError","deleteContactRequest","deleteContactSuccess","changeFilter","getFilter","phonebook","filter","getVisibleContacts","createSelector","items","allContacts","normalizedFilter","toLowerCase","contact","includes","ContactList","contacts","ondeleteContact","contactId","delete","then","catch","error","className","listContact","map","number","contactItem","ContactForm","setNumber","event","currentTarget","warn","reset","find","alert","addContacts","pattern","required","placeholder","Filter","contactsActions","ContactsView","params","useEffect","PrivateRoute","children","redirectTo","routeProps","PublicRoute","restricted","shouldRedirect","App","authOpertations","fallback","path","createReducer","action","payload","combineReducers","authSlice","createSlice","initialState","extraReducers","fulfilled","pending","isFetchingCurrentUser","rejected","process","authPersistConfig","key","storage","whitelist","blacklist","store","configureStore","reducer","persistReducer","authReducer","contactsReducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","concat","logger","devTools","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.7ca03e0d.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\naxios.defaults.baseURL = \"https://connections-api.herokuapp.com/\";\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = \"\";\r\n  },\r\n};\r\n\r\n/*\r\n * POST @ /users/signup\r\n * body: { name, email, password }\r\n * После успешной регистрации добавляем токен в HTTP-заголовок\r\n */\r\nexport const register = createAsyncThunk(\r\n  \"/auth/register\",\r\n  async (credentials, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios.post(\"/users/signup\", credentials);\r\n      token.set(data.token);\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n      // TODO: Добавить обработку ошибки error.message\r\n    }\r\n  }\r\n);\r\n\r\n/*\r\n * POST @ /users/login\r\n * body: { email, password }\r\n * После успешного логина добавляем токен в HTTP-заголовок\r\n */\r\nconst logIn = createAsyncThunk(\r\n  \"auth/login\",\r\n  async (credentials, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios.post(\"/users/login\", credentials);\r\n      token.set(data.token);\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n      // TODO: Добавить обработку ошибки error.message\r\n    }\r\n  }\r\n);\r\n\r\n/*\r\n * POST @ /users/logout\r\n * headers: Authorization: Bearer token\r\n * После успешного логаута, удаляем токен из HTTP-заголовка\r\n */\r\nconst logOut = createAsyncThunk(\"auth/logout\", async () => {\r\n  try {\r\n    await axios.post(\"/users/logout\");\r\n    token.unset();\r\n  } catch (error) {\r\n    // TODO: Добавить обработку ошибки error.message\r\n  }\r\n});\r\n/*\r\n * GET @ /users/current\r\n * headers:\r\n *    Authorization: Bearer token\r\n *\r\n * 1. Забираем токен из стейта через getState()\r\n * 2. Если токена нет, выходим не выполняя никаких операций\r\n * 3. Если токен есть, добавляет его в HTTP-заголовок и выполянем операцию\r\n */\r\nconst fetchCurrentUser = createAsyncThunk(\r\n  \"auth/refresh\",\r\n  async (_, thunkAPI) => {\r\n    const state = thunkAPI.getState();\r\n    const token = state.auth.token;\r\n    // console.log(token);\r\n    const persistedToken = state.auth.token;\r\n\r\n    if (persistedToken === null) {\r\n      // console.log(\"Токена нет\");\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n\r\n    token.set(persistedToken);\r\n    try {\r\n      const { data } = await axios.get(\"/users/current\");\r\n      console.log(data);\r\n      return data;\r\n    } catch (error) {\r\n      // TODO: Добавить обработку ошибки error.message\r\n    }\r\n  }\r\n);\r\n\r\nconst operations = {\r\n  register,\r\n  logOut,\r\n  logIn,\r\n  fetchCurrentUser,\r\n};\r\nexport default operations;\r\n","const getIsLoggedIn = (state) => state.auth.isLoggedIn;\r\nconst getUserEmail = (state) => state.auth.user.email;\r\nconst getUsername = (state) => state.auth.user.name;\r\nconst getisFetchingUser = (state) => state.auth.isFetchingUser;\r\n\r\nconst authSelectors = {\r\n  getIsLoggedIn,\r\n  getUsername,\r\n  getUserEmail,\r\n  getisFetchingUser,\r\n};\r\n\r\nexport default authSelectors;\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport authSelectors from \"./redux/auth/auth-selectors\";\r\n\r\nconst styles = {\r\n  link: {\r\n    display: \"inline-block\",\r\n    textDecoration: \"none\",\r\n    fontWeight: 900,\r\n    color: \"#282c34\",\r\n    marginRight: \"200px\",\r\n  },\r\n  activeLink: {\r\n    color: \"#61dafb\",\r\n  },\r\n};\r\n\r\nconst Navigation = () => {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <nav>\r\n      <NavLink to=\"/\" exact style={styles.link} activeStyle={styles.activeLink}>\r\n        Главная\r\n      </NavLink>\r\n      &nbsp;\r\n      {isLoggedIn && (\r\n        <NavLink\r\n          to=\"/contacts\"\r\n          exact\r\n          style={styles.link}\r\n          activeStyle={styles.activeLink}\r\n        >\r\n          Контакты\r\n        </NavLink>\r\n      )}\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport authSelectors from \"../redux/auth/auth-selectors\";\r\nimport authOperations from \"../redux/auth/auth-operations\";\r\n// import defaultAvatar from \"./default-avatar.png\";\r\n\r\nconst styles = {\r\n  container: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    marginRight: 4,\r\n  },\r\n  name: {\r\n    fontWeight: 700,\r\n    marginRight: 12,\r\n  },\r\n};\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector(authSelectors.getUsername);\r\n  //   const avatar = defaultAvatar;\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      {/* <img src={avatar} alt=\"\" width=\"32\" style={styles.avatar} /> */}\r\n      <span style={styles.name}>Добро пожаловать, {name}</span>\r\n      <button type=\"button\" onClick={() => dispatch(authOperations.logOut())}>\r\n        Выйти\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst styles = {\r\n  link: {\r\n    display: \"inline-block\",\r\n    textDecoration: \"none\",\r\n    fontWeight: 900,\r\n    color: \"#282c34\",\r\n    marginLeft: \"20px\",\r\n  },\r\n  activeLink: {\r\n    color: \"#61dafb\",\r\n  },\r\n};\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <div>\r\n      <NavLink\r\n        to=\"/register\"\r\n        exact\r\n        style={styles.link}\r\n        activeStyle={styles.activeLink}\r\n      >\r\n        Регистрация\r\n      </NavLink>\r\n      <NavLink\r\n        href=\"#\"\r\n        underline=\"none\"\r\n        to=\"/login\"\r\n        exact\r\n        style={styles.link}\r\n        activeStyle={styles.activeLink}\r\n      >\r\n        Логин\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}\r\n","import { useSelector } from \"react-redux\";\r\nimport Navigation from \"./Navigation\";\r\nimport UserMenu from \"./UserMenu/UserMenu\";\r\nimport AuthNav from \"./AuthNav\";\r\nimport authSelectors from \".././components/redux/auth/auth-selectors\";\r\nimport { AppBar, Toolbar, Typography } from \"@material-ui/core\";\r\n\r\nexport default function AppBarComponent() {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <AppBar>\r\n      <Toolbar>\r\n        <Typography variant=\"h6\" style={{ flexGrow: 1 }} component=\"div\">\r\n          <Navigation />\r\n        </Typography>\r\n        <Typography variant=\"h6\">\r\n          {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n        </Typography>\r\n      </Toolbar>\r\n    </AppBar>\r\n    // <header style={styles.header}>\r\n    //   <Navigation />\r\n    //   {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n    // </header>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nconst styles = {\r\n  container: {\r\n    marginTop: \"100px\",\r\n  },\r\n  title: {\r\n    fontWeight: 600,\r\n    textAlign: \"center\",\r\n  },\r\n};\r\nconst HomeView = () => (\r\n  <div style={styles.container}>\r\n    <h1>\r\n      Приветствуем!\r\n      <br />\r\n      Здесь вы можете хранить ваши контакты :)\r\n    </h1>\r\n  </div>\r\n);\r\n\r\nexport default HomeView;\r\n","import { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport authOperations from \"../redux/auth/auth-operations\";\r\nimport { TextField, DialogContent, Button } from \"@material-ui/core\";\r\n\r\nexport default function LoginView() {\r\n  const dispatch = useDispatch();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const handleChange = ({ target: { name, value } }) => {\r\n    switch (name) {\r\n      case \"email\":\r\n        return setEmail(value);\r\n      case \"password\":\r\n        return setPassword(value);\r\n      default:\r\n        return;\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    dispatch(authOperations.logIn({ email, password }));\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Страница логина</h1>\r\n      <DialogContent>\r\n        <form onSubmit={handleSubmit} autoComplete=\"off\">\r\n          <label>\r\n            Почта &nbsp;\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={email}\r\n              onChange={handleChange}\r\n            />\r\n          </label>\r\n\r\n          <label>\r\n            Пароль &nbsp;\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              type=\"password\"\r\n              name=\"password\"\r\n              value={password}\r\n              onChange={handleChange}\r\n            />\r\n          </label>\r\n\r\n          <Button type=\"submit\">Войти</Button>\r\n        </form>\r\n      </DialogContent>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport authOperations from \"../redux/auth/auth-operations\";\r\nimport { TextField, DialogContent, Button } from \"@material-ui/core\";\r\n\r\nexport default function RegisterView() {\r\n  const dispatch = useDispatch();\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const handleChange = ({ target: { name, value } }) => {\r\n    switch (name) {\r\n      case \"name\":\r\n        return setName(value);\r\n      case \"email\":\r\n        return setEmail(value);\r\n      case \"password\":\r\n        return setPassword(value);\r\n      default:\r\n        return;\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    dispatch(authOperations.register({ name, email, password }));\r\n    // console.log(name);\r\n    setName(\"\");\r\n    setEmail(\"\");\r\n    setPassword(\"\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Страница регистрации</h1>\r\n      <DialogContent>\r\n        <form onSubmit={handleSubmit} autoComplete=\"off\">\r\n          <label>\r\n            Имя &nbsp;\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={name}\r\n              onChange={handleChange}\r\n            />\r\n          </label>\r\n\r\n          <label>\r\n            Почта &nbsp;\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={email}\r\n              onChange={handleChange}\r\n            />\r\n          </label>\r\n\r\n          <label>\r\n            Пароль &nbsp;\r\n            <TextField\r\n              id=\"pass\"\r\n              autoFocus\r\n              margin=\"dense\"\r\n              type=\"password\"\r\n              name=\"password\"\r\n              value={password}\r\n              onChange={handleChange}\r\n            />\r\n          </label>\r\n\r\n          <Button type=\"submit\">Зарегистрироваться</Button>\r\n        </form>\r\n      </DialogContent>\r\n    </div>\r\n  );\r\n}\r\n","// import types from \"./types\";\r\n// import { v4 as uuidv4 } from \"uuid\";\r\nimport { createAction } from \"@reduxjs/toolkit\";\r\n\r\nexport const fetchContactRequest = createAction(\"contacts/fetchContactRequest\");\r\nexport const fetchContactSuccess = createAction(\"contacts/fetchContactSuccess\");\r\nexport const fetchContactError = createAction(\"contacts/fetchContactError\");\r\n\r\nexport const addContactRequest = createAction(\"contacts/addContactRequest\");\r\nexport const addContactSuccess = createAction(\"contacts/addContactSuccess\");\r\nexport const addContactError = createAction(\"contacts/addContactError\");\r\n// const addContacts = createAction(\"contacts/add\", (data) => ({\r\n//   payload: {\r\n//     id: uuidv4(),\r\n//     name: data.name,\r\n//     number: data.number,\r\n//   },\r\n// }));\r\n// const addContacts = (data) => ({\r\n//   type: types.ADD,\r\n//   payload: {\r\n//     id: uuidv4(),\r\n//     name: data.name,\r\n//     number: data.number,\r\n//   },\r\n// });\r\n\r\nexport const deleteContactRequest = createAction(\r\n  \"contacts/deleteContactRequest\"\r\n);\r\nexport const deleteContactSuccess = createAction(\r\n  \"contacts/deleteContactSuccess\"\r\n);\r\nexport const deleteContactError = createAction(\"contacts/deleteContactError\");\r\n// export const deleteContacts = createAction(\"contacts/delete\");\r\n// const deleteContacts = createAction(types.DELETE);\r\n// const deleteContacts = (id) => ({\r\n//   type: types.DELETE,\r\n//   payload: id,\r\n// });\r\n\r\nexport const changeFilter = createAction(\"contacts/changeFilter\");\r\n// const changeFilter = createAction(types.CHANGE_FILTER);\r\n// const changeFilter = (value) => ({\r\n//   type: types.CHANGE_FILTER,\r\n//   payload: value,\r\n// });\r\n// const contactsActions = {\r\n//   // addContacts,\r\n//   deleteContacts,\r\n//   changeFilter,\r\n//   addContactRequest,\r\n//   addContactSuccess,\r\n//   addContactError,\r\n// };\r\n// export default contactsActions;\r\n","import { createSelector } from \"@reduxjs/toolkit\";\r\n\r\nexport const getFilter = (state) => state.phonebook.filter;\r\nexport const getAllContacts = (state) => state.phonebook.items;\r\n\r\nexport const getVisibleContacts = createSelector(\r\n  [getAllContacts, getFilter],\r\n  (allContacts, filter) => {\r\n    const normalizedFilter = filter.toLowerCase();\r\n\r\n    return allContacts.filter((contact) =>\r\n      contact.name.toLowerCase().includes(normalizedFilter)\r\n    );\r\n  }\r\n);\r\n\r\n// export default {\r\n//   getFilter,\r\n//   getAllContacts,\r\n//   getVisibleContacts,\r\n// };\r\n\r\n// const getVisibleContacts = (state) => {\r\n//   const filter = getFilter(state);\r\n//   const allContacts = getAllContacts(state);\r\n//   const normalizedFilter = filter.toLowerCase();\r\n\r\n//   return allContacts.filter((contact) =>\r\n//     contact.name.toLowerCase().includes(normalizedFilter)\r\n//   );\r\n// }; перед. с мемоизацией\r\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n// import * as contactsActions from \"../redux/actions\";\nimport { deleteContacts } from \"../redux/operations\";\nimport { getVisibleContacts } from \"../redux/selectors\";\nimport style from \"./ContactList.module.css\";\nimport PropTypes from \"prop-types\";\n\nconst ContactList = () => {\n  const contacts = useSelector((state) =>\n    // getVisibleContacts(state.phonebook.items, state.phonebook.filter)\n    getVisibleContacts(state)\n  );\n  const dispatch = useDispatch();\n\n  // useEffect(() => {\n  //   dispatch(featchContacts());\n  // }, [dispatch]);\n\n  const ondeleteContact = (id) => dispatch(deleteContacts(id));\n\n  return (\n    <ul className={style.listContact}>\n      {contacts.map(({ id, name, number }) => (\n        <li key={id} className={style.contactItem}>\n          <p>\n            &#9742; {name}: {number}\n          </p>\n          <button type=\"button\" onClick={() => ondeleteContact(id)}>\n            Delete\n          </button>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default ContactList;\n\nContactList.propTypes = {\n  ondeleteContact: PropTypes.func,\n  contacts: PropTypes.array,\n};\n\n// const getVisibleContacts = (allContacts, filter) => {\n//   const normalizedFilter = filter.toLowerCase();\n// return allContacts.filter((contact) =>\n//   contact.name.toLowerCase().includes(normalizedFilter)\n// );\n// };\n\n// const mapStateToProps = (state) => ({\n//   contacts: getVisibleContacts(state.phonebook.items, state.phonebook.filter),\n// });\n\n// const mapStateToProps = (state) => {\n//   const { filter, items } = state.phonebook;\n//   const normalizedFilter = filter.toLowerCase();\n//   const visibleContacts = getVisibleContacts(items, filter);\n//   return {\n//     contacts: state.phonebook.items,\n//   };\n// };\n\n// const mapDispatchToProps = (dispatch) => ({\n//   ondeleteContact: (id) => dispatch(contactsActions.deleteContacts(id)),\n// });\n\n// export default connect(mapStateToProps, mapDispatchToProps)(ContactList);\n","// import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport {\r\n  addContactRequest,\r\n  addContactSuccess,\r\n  addContactError,\r\n  deleteContactRequest,\r\n  deleteContactSuccess,\r\n  fetchContactRequest,\r\n  fetchContactSuccess,\r\n  fetchContactError,\r\n} from \"./actions\";\r\n\r\n// axios.defaults.baseURL = \"http://localhost:4040/\";\r\n\r\nexport const featchContacts = () => async (dispatch) => {\r\n  dispatch(fetchContactRequest());\r\n  try {\r\n    const { data } = await axios.get(`/contacts`);\r\n    dispatch(fetchContactSuccess(data));\r\n  } catch (error) {\r\n    dispatch(fetchContactError(error));\r\n  }\r\n};\r\n\r\n// export const featchContacts = createAsyncThunk(\r\n//   \"contacts/fetchContacts\",\r\n//   async () => {\r\n//     const { data } = await axios.get(`/contacts`);\r\n//     return data;\r\n//   }\r\n// );\r\n\r\nexport const addContacts = (name, number) => (dispatch) => {\r\n  const contact = {\r\n    name,\r\n    number,\r\n  };\r\n\r\n  dispatch(addContactRequest());\r\n\r\n  axios\r\n    .post(`/contacts`, contact)\r\n    .then(({ data }) => dispatch(addContactSuccess(data)))\r\n    .catch((error) => dispatch(addContactError(error)));\r\n};\r\n\r\nexport const deleteContacts = (contactId) => (dispatch) => {\r\n  dispatch(deleteContactRequest());\r\n\r\n  axios\r\n    .delete(`/contacts/${contactId}`)\r\n    .then(() => dispatch(deleteContactSuccess(contactId)))\r\n    .catch((error) => dispatch(addContactError(error)));\r\n};\r\n\r\n// export default {\r\n//   addContacts,\r\n//   deleteContacts,\r\n//   featchContacts,\r\n// };\r\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useSelector, useDispatch } from \"react-redux\";\n// import ContactsActions from \"../redux/actions\";\nimport { addContacts } from \"../redux/operations\";\n\nfunction ContactForm() {\n  const [name, setName] = useState(\"\");\n  const [number, setNumber] = useState(\"\");\n  const contacts = useSelector((state) => state.phonebook.items);\n  const dispatch = useDispatch();\n\n  const handleChange = (event) => {\n    switch (event.target.name) {\n      case \"name\":\n        setName(event.currentTarget.value);\n        break;\n      case \"number\":\n        setNumber(event.currentTarget.value);\n        break;\n\n      default:\n        console.warn(`${event.target.value} not found`);\n    }\n  };\n  const handleAddContact = (event) => {\n    event.preventDefault();\n\n    if (\n      contacts.find(\n        (contact) => contact.name.toLowerCase() === name.toLowerCase()\n      )\n    ) {\n      return alert(`${name} is already in contact`);\n    }\n    dispatch(addContacts(name, number));\n    // onSubmit({ name, number });\n    reset();\n  };\n\n  const reset = () => {\n    setName(\"\");\n    setNumber(\"\");\n  };\n\n  return (\n    <form onSubmit={handleAddContact}>\n      <label>\n        Name\n        <input\n          type=\"text\"\n          value={name}\n          onChange={handleChange}\n          name=\"name\"\n          pattern=\"^[a-zA-Zа-яА-Я]+(([' -][a-zA-Zа-яА-Я ])?[a-zA-Zа-яА-Я]*)*$\"\n          title=\"Имя может состоять только из букв, апострофа, тире и пробелов. Например Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan и т. п.\"\n          required\n          placeholder=\"Name Surname\"\n        />\n      </label>\n      <label>\n        Number\n        <input\n          type=\"tel\"\n          name=\"number\"\n          value={number}\n          onChange={handleChange}\n          pattern=\"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}\"\n          title=\"Номер телефона должен состоять цифр и может содержать пробелы, тире, круглые скобки и может начинаться с +\"\n          required\n          placeholder=\"111-11-11\"\n        />\n      </label>\n      <button type=\"submit\">Add contact</button>\n    </form>\n  );\n}\n\nexport default ContactForm;\n\nContactForm.propTypes = {\n  contacts: PropTypes.array,\n  name: PropTypes.string,\n  number: PropTypes.number,\n  handleAddContact: PropTypes.func,\n  handleChange: PropTypes.func,\n};\n\n// const mapDispatchToProps = (dispatch) => ({\n//   onSubmit: (data) => dispatch(ContactsActions.addContacts(data)),\n// });\n\n// export default connect(null, mapDispatchToProps)(ContactForm);\n\n// const formSubmit = (data) => {\n//   // console.log(data);\n//   const newContact = {\n//     id: uuidv4(),\n//     name: data.name,\n//     number: data.number,\n//   };\n//   // console.log(newContact);\n//  (contacts) => [newContact, ...contacts]);\n//   } else {\n//     alert(`${data.name} is already in contact`);\n//   }\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n// import { connect } from \"react-redux\";\nimport * as contactsActions from \"../redux/actions\";\nimport { getFilter } from \"../redux/selectors\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nconst Filter = () => {\n  const value = useSelector(getFilter);\n  const dispatch = useDispatch();\n\n  return (\n    <label>\n      <p>Find contacts by name</p>\n      <input\n        type=\"text\"\n        value={value}\n        onChange={(event) =>\n          dispatch(contactsActions.changeFilter(event.target.value))\n        }\n      />\n    </label>\n  );\n};\nexport default Filter;\n\nFilter.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func,\n};\n\n// const mapStateToProps = (state) => ({\n//   value: state.phonebook.filter,\n// });\n\n// const mapDispatchToProps = (dispatch) => ({\n//   onChange: (event) =>\n//     dispatch(contactsActions.changeFilter(event.target.value)),\n// });\n\n// export default connect(mapStateToProps, mapDispatchToProps)(Filter);\n","import { useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport ContactList from \"../ContactList/ContactList\";\r\nimport ContactForm from \"../ContactForm/ContactForm\";\r\nimport Filter from \"../Filter/Filter\";\r\nimport { featchContacts } from \"../redux/operations\";\r\n// import authSelectors from \"../redux/auth/auth-selectors\";\r\n\r\nexport default function ContactsView(params) {\r\n  const dispatch = useDispatch();\r\n  // const isLoadingContact = useSelector(contactsSelectors.getLoading);\r\n\r\n  useEffect(() => dispatch(featchContacts()), [dispatch]);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n      <ContactForm />\r\n      <h2>Contacts</h2>\r\n      <Filter />\r\n      <ContactList />\r\n      {/* {isLoadingContact && <p>Загружаем...</p>} */}\r\n    </div>\r\n  );\r\n}\r\n","import { useSelector } from \"react-redux\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport authSelectors from \"../components/redux/auth/auth-selectors\";\r\n/**\r\n * 1. Он должен повторять API Route\r\n *  2. Он должен рендерить Route\r\n * - Если маршрут приватный и пользователь залогинен, рендерит компонент\r\n * - В противном случае рендерит Redirect на redirectTo\r\n */\r\n\r\nexport default function PrivateRoute({\r\n  children,\r\n  redirectTo = \"/\",\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <Route {...routeProps}>\r\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n    </Route>\r\n  );\r\n}\r\n","import { useSelector } from \"react-redux\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport authSelectors from \"./redux/auth/auth-selectors\";\r\n\r\n/**\r\n * - Если маршрут ограниченный, и юзер залогинен, рендерит редирект на redirectTo\r\n * - В противном случае рендерит компонент\r\n *\r\n */\r\n\r\nexport default function PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo = \"/contacts\",\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  const shouldRedirect = isLoggedIn && restricted;\r\n  return (\r\n    <Route {...routeProps}>\r\n      {shouldRedirect ? <Redirect to={redirectTo} /> : children}\r\n    </Route>\r\n  );\r\n}\r\n","import { Suspense, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport authOpertations from \"./components/redux/auth/auth-operations\";\nimport authSelectors from \"./components/redux/auth/auth-selectors\";\nimport \"./App.css\";\nimport AppBarComponent from \"./components/AppBar\";\nimport { Switch } from \"react-router-dom\";\nimport HomeView from \"./components/views/HomeViews\";\nimport LoginView from \"./components/views/LoginView\";\nimport RegisterView from \"./components/views/RegisterView\";\nimport ContactsView from \"./components/views/ContactsView\";\nimport PrivateRoute from \"./components/PrivateRoute\";\nimport PublicRoute from \"./components/PublicRoute\";\n\nexport default function App() {\n  const dispatch = useDispatch();\n  const isFetchingUser = useSelector(authSelectors.getisFetchingUser);\n\n  useEffect(() => {\n    dispatch(authOpertations.fetchCurrentUser());\n  }, [dispatch]);\n\n  return (\n    !isFetchingUser && (\n      <div>\n        <AppBarComponent />\n        <div className=\"App\">\n          <Switch>\n            <Suspense fallback={<p>Загружаем...</p>}>\n              <PublicRoute exact path=\"/\" component={HomeView} />\n              <PublicRoute\n                exact\n                path=\"/register\"\n                component={RegisterView}\n                restricted\n              />\n              <PublicRoute\n                exact\n                path=\"/login\"\n                redirectTo=\"/contacts\"\n                component={LoginView}\n                restricted\n              />\n              <PrivateRoute\n                path=\"/contacts\"\n                redirectTo=\"/login\"\n                component={ContactsView}\n              />\n            </Suspense>\n          </Switch>\n        </div>\n      </div>\n    )\n  );\n}\n","import { combineReducers } from \"redux\";\r\nimport { createReducer } from \"@reduxjs/toolkit\";\r\n// import actions from \"./actions\";\r\nimport {\r\n  changeFilter,\r\n  addContactSuccess,\r\n  fetchContactError,\r\n  deleteContactSuccess,\r\n  fetchContactSuccess,\r\n  fetchContactRequest,\r\n} from \"./actions\";\r\n\r\nconst items = createReducer([], {\r\n  [fetchContactSuccess]: (_, action) => action.payload,\r\n  [addContactSuccess]: (state, action) => [...state, action.payload],\r\n  [deleteContactSuccess]: (state, action) =>\r\n    state.filter((contact) => contact.id !== action.payload),\r\n});\r\n\r\nconst filter = createReducer(\"\", {\r\n  [changeFilter]: (_, action) => action.payload,\r\n});\r\n\r\nconst error = createReducer(null, {\r\n  [fetchContactError]: (_, action) => action.payload,\r\n  [fetchContactRequest]: () => null,\r\n});\r\n\r\nexport default combineReducers({\r\n  items,\r\n  filter,\r\n  error,\r\n});\r\n\r\n// import types from \"./types\";\r\n// console.log(actions.addContacts.type);\r\n\r\n// {\r\n//     phonebook: {\r\n//         items: '',\r\n//         filter: ''\r\n//     }\r\n// }\r\n\r\n// const items = (state = [], { type, payload }) => {\r\n//   switch (type) {\r\n//     case types.ADD:\r\n//       return [...state, payload];\r\n\r\n//     case types.DELETE:\r\n//       return state.filter((contact) => contact.id !== payload);\r\n\r\n//     default:\r\n//       return state;\r\n//   }\r\n// };\r\n\r\n// const filter = (state = \"\", { type, payload }) => {\r\n//   switch (type) {\r\n//     case \"contacts/changeFilter\":\r\n//       return payload;\r\n\r\n//     default:npm i redux\r\n//       return state;\r\n//   }\r\n// };\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport authOperations from \"./auth-operations\";\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n  isFetchingUser: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  extraReducers: {\r\n    [authOperations.register.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logIn.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logOut.fulfilled](state, action) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.pending](state) {\r\n      state.isFetchingCurrentUser = true;\r\n    },\r\n    [authOperations.fetchCurrentUser.fulfilled](state, action) {\r\n      state.user = action.payload;\r\n      state.isLoggedIn = true;\r\n      state.isFetchingUser = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.rejected](state) {\r\n      state.isFetchingUser = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport logger from \"redux-logger\";\r\n// import { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport contactsReducer from \"./reducer\";\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport authReducer from \"./auth/auth-slice\";\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from \"redux-persist\";\r\n\r\nconsole.log(process.env.NODE_ENV);\r\n\r\nconst authPersistConfig = {\r\n  key: \"auth\",\r\n  storage,\r\n  whitelist: [\"token\"],\r\n  blacklist: [\"filter\"],\r\n};\r\nexport const store = configureStore({\r\n  reducer: {\r\n    // phonebook: persistReducer(phonebookPersistConfig, contactsReducer),\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n    phonebook: contactsReducer,\r\n  },\r\n  middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n      },\r\n    }).concat(logger),\r\n  devTools: process.env.NODE_ENV === \"development\",\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n\r\n// export default { store, persistor };\r\n\r\n// const rootReducer = combineReducers({\r\n//   // phonebook: contactsReducer,\r\n//   phonebook: persistReducer(persistConfig, contactsReducer),\r\n// });\r\n// const persistedReducer = persistReducer(persistConfig, rootReducer);\r\n// const rootReducer = combineReducers({\r\n//   phonebook: contactsReducer,\r\n// });\r\n// const store = createStore(\r\n//   rootReducer,\r\n//   composeWithDevTools()\r\n// );\r\n// console.log(getDefaultMiddleware());\r\n// const middlewere = [...getDefaultMiddleware(), logger];\r\n\r\n// const myMiddlewere = (store) => (next) => (action) => {\r\n//   console.log(\"Моя прослойка\", action);\r\n//   next(action);\r\n// };\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { PersistGate } from \"redux-persist/integration/react\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { store } from \"./components/redux/store\";\nimport { persistor } from \"./components/redux/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contactItem\":\"ContactList_contactItem__jly4Y\",\"listContact\":\"ContactList_listContact__2zayP\"};"],"sourceRoot":""}